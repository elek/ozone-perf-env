source:
  - url: git::https://github.com/flokkr/infra-flekszible.git
  - url: git::https://github.com/elek/ozone-flekszible.git
import:
    - path: ozone
      transformations:
         - type: ozone/emptydir
         - type: ozone/prometheus
         - type: PublishStatefulSet
         - type: ozone/devtracing
         - type: ozone/profiler
         - type: Change
           path: 
             - spec
             - replicas
           trigger:
             metadata:
                name: datanode
           replacement: 3
         - type: Add
           path:
             - spec
           value:
               podManagementPolicy: Parallel
           trigger:
              kind: Statefulset
              metadata:
                  name: datanode
transformations:
  - type: Namespace
  - type: Add
    trigger:
      metadata:
          name: config
    path:
      - data
    value:
      OZONE-SITE.XML_hdds.prometheus.endpoint.enabled: "true"
  - type: image
    image: elek/ozone:20191108-3
    trigger:
       metadata:
         labels:
           app: ozone
