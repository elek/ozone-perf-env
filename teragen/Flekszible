import:
  - path: ../util
  - path: mr
    transformations:
    - type: ozone/ozonefs
      image: elek/ozone-dev:49edf55c8
    - type: perftest/runconfigmap
      configmap:  teragen-testscript
      scriptname: teragen.sh
  - path: yarn
    destination: yarn
    transformations:
    - type: ozone/ozonefs
      image: elek/ozone-dev:49edf55c8
    - type: PublishService
    - type: add
      path:
       - spec
       - template
       - spec
      value:
         nodeSelector:
            group: b
  - path: ozone
    destination: ozone
    transformations:
    - type: perftest/jvm
    - type: perftest/handlerfix
    - type: add
      trigger:
         metadata:
            name: ozone-config
      path:
        - data
      value:
        OZONE-SITE.XML_ozone.scm.chunk.layout: FILE_PER_CHUNK
    - type: remove
      path:
        - data
        - CORE-SITE.XML_fs.defaultFS
    - type: image
      image: elek/ozone-dev:49edf55c8
    - type: add
      trigger:
        metadata:
          name: ozone-datanode
      path:
        - spec
        - template
        - spec
        - containers
        - datanode
        - volumeMounts
      value:
        - name: storage
          mountPath: /data/storage
    - type: add
      trigger:
        metadata:
          name: ozone-datanode
      path:
        - spec
        - template
        - spec
        - volumes
      value:
         - name: storage
           hostPath:
             path: /data/1/ozone
             type: Directory
    - type: add
      trigger:
        metadata:
          name: ozone-datanode
      path:
        - spec
        - template
        - spec
        - volumes
        - data
        - emptyDir
      value:
        medium: Memory
    - type: add
      path:
        - spec
        - template
        - spec
      value:
        nodeSelector:
           group: a
  - path: hdfs
    destination: hdfs
    transformations:
    - type: remove
      path:
        - spec
        - template
        - spec
        - volumes
        - data
        - emptyDir
    - type: add
      path:
        - spec
        - template
        - spec
        - volumes
        - data
      value:
         hostPath:
            path: /data/1/hdfs
            type: Directory
    - type: add
      path:
        - spec
        - template
        - spec
      value:
        nodeSelector:
           group: a

